import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import {Stack} from '@chakra-ui/react';
import ProviderDecorator from '../provider-decorator';
import DataTable from '../table/data-table';
import TertiaryButton from '../components/tertiary-button';
import * as stories from './data-table.stories';

<Meta title="Components/DataTable" component={DataTable} decorators={[ProviderDecorator]} />

# DataTable

A `DataTable` is pretty self-explanatory :) For every column in an item you can decide how you want to render it. Here are some examples for the items prop:

```js
// render a value as string to the dom
const items = [{
    id: '42',
    columns: [
        {value: 'some-value'},
    ],
}];
```

```js
// render a value as link to the dom
const items = [{
    id: '42',
    columns: [
        {value: 'some-link', link: 'https://design-system.trigo.dev/', isExternal: true},
    ],
}];
```

```jsx
// use a render prop to render whatever you want
const items = [{
    id: '42',
    columns: [
        {render: (value) => <SomeFanyComponent value={value} />},
    ],
}];
```

The `DataTable` has also the ability to display a blink-animation whenver the `items` array grows. To enable this feature pass the `animateNewRow` prop. There is a interactive example below.

## Example

<Canvas>
  <Story name="datatable-example">
    <DataTable
        columns={['name', 'email', 'customerNumber']}
        items={[
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: chance.email()},
                    {value: chance.integer({min: 10000000, max: 99999999 })},
                ],
            },
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: chance.email()},
                    {value: chance.integer({min: 10000000, max: 99999999 })},
                ],
            },
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: chance.email()},
                    {value: chance.integer({min: 10000000, max: 99999999 })},
                ],
            }
        ]}
    />
  </Story>
</Canvas>

## Props

<ArgsTable of={DataTable} />

## Example with inline feedback

<Canvas>
  <Story name="datatable-example-with-inline-feedback">
    {stories.DataTableWithEntryAnimation()}
  </Story>
</Canvas>

## Example with links

<Canvas>
  <Story name="datatable-example-with-links">
    <DataTable
        columns={['name', 'website', 'customerNumber']}
        items={[
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: 'design-system.trigo.dev', link: 'https://design-system.trigo.dev/', isExternal: true},
                    {value: chance.integer({min: 10000000, max: 99999999 })},
                ],
            },
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: 'design-system.trigo.dev', link: 'https://design-system.trigo.dev/', isExternal: true},
                    {value: chance.integer({min: 10000000, max: 99999999 })},
                ],
            },
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: 'design-system.trigo.dev', link: 'https://design-system.trigo.dev/', isExternal: true},
                    {value: chance.integer({min: 10000000, max: 99999999 })},
                ],
            }
        ]}
    />
  </Story>
</Canvas>

## Example with actions

<Canvas>
  <Story name="datatable-example-with-actions">
    <DataTable
        columns={['name', 'email', 'action']}
        items={[
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: chance.email()},
                    {render: () => <TertiaryButton size="sm">Action</TertiaryButton>},
                ],
            },
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: chance.email()},
                    {render: () => <TertiaryButton size="sm">Action</TertiaryButton>},
                ],
            },
            {
                id: chance.string({length: 20}),
                columns: [
                    {value: chance.name()},
                    {value: chance.email()},
                    {render: () => <TertiaryButton size="sm">Action</TertiaryButton>},
                ],
            }
        ]}
    />
  </Story>
</Canvas>
